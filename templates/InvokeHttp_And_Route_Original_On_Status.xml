<?xml version="1.0" encoding="UTF-8" standalone="yes"?><template><description>This flow demonstrates how to call an HTTP service based on an incoming FlowFile, and route the original FlowFile based on the status code returned from the invocation. In this example, every 30 seconds a FlowFile is produced, an attribute is added to the FlowFile that sets q=nifi, the google.com is invoked for that FlowFile, and any response with a 200 is routed to a relationship called 200.</description><name>InvokeAndRouteOnStatus</name><snippet><connections><id>1e03fc63-e6bb-4ee4-8445-8a0c38ba8b39</id><parentGroupId>f171ca87-d018-4f94-a245-4ae378b9e181</parentGroupId><backPressureDataSizeThreshold>0 MB</backPressureDataSizeThreshold><backPressureObjectThreshold>0</backPressureObjectThreshold><destination><groupId>f171ca87-d018-4f94-a245-4ae378b9e181</groupId><id>0ba0b02b-bc72-492d-8e1d-d473fdaca6c5</id><type>PROCESSOR</type></destination><flowFileExpiration>0 sec</flowFileExpiration><labelIndex>1</labelIndex><name></name><selectedRelationships>success</selectedRelationships><source><groupId>f171ca87-d018-4f94-a245-4ae378b9e181</groupId><id>978f5abe-b43b-47e2-9f0b-37c665fb6fd8</id><type>PROCESSOR</type></source><zIndex>0</zIndex></connections><connections><id>87c6a9d6-37ca-4f3b-a774-4dbfa37323a0</id><parentGroupId>f171ca87-d018-4f94-a245-4ae378b9e181</parentGroupId><backPressureDataSizeThreshold>0 MB</backPressureDataSizeThreshold><backPressureObjectThreshold>0</backPressureObjectThreshold><bends><x>1247.5449829101562</x><y>213.377197265625</y></bends><bends><x>1247.5449829101562</x><y>263.377197265625</y></bends><destination><groupId>f171ca87-d018-4f94-a245-4ae378b9e181</groupId><id>0ba0b02b-bc72-492d-8e1d-d473fdaca6c5</id><type>PROCESSOR</type></destination><flowFileExpiration>0 sec</flowFileExpiration><labelIndex>1</labelIndex><name></name><selectedRelationships>Failure</selectedRelationships><selectedRelationships>Retry</selectedRelationships><source><groupId>f171ca87-d018-4f94-a245-4ae378b9e181</groupId><id>0ba0b02b-bc72-492d-8e1d-d473fdaca6c5</id><type>PROCESSOR</type></source><zIndex>0</zIndex></connections><connections><id>c15d92f3-4f31-4453-9361-4a1e05286339</id><parentGroupId>f171ca87-d018-4f94-a245-4ae378b9e181</parentGroupId><backPressureDataSizeThreshold>0 MB</backPressureDataSizeThreshold><backPressureObjectThreshold>0</backPressureObjectThreshold><destination><groupId>f171ca87-d018-4f94-a245-4ae378b9e181</groupId><id>978f5abe-b43b-47e2-9f0b-37c665fb6fd8</id><type>PROCESSOR</type></destination><flowFileExpiration>0 sec</flowFileExpiration><labelIndex>1</labelIndex><name></name><selectedRelationships>success</selectedRelationships><source><groupId>f171ca87-d018-4f94-a245-4ae378b9e181</groupId><id>0c7ce557-9e17-40d7-be3d-59e40bda3052</id><type>PROCESSOR</type></source><zIndex>0</zIndex></connections><connections><id>12c0c979-7b9c-41fa-9112-621faba86586</id><parentGroupId>f171ca87-d018-4f94-a245-4ae378b9e181</parentGroupId><backPressureDataSizeThreshold>0 MB</backPressureDataSizeThreshold><backPressureObjectThreshold>0</backPressureObjectThreshold><destination><groupId>f171ca87-d018-4f94-a245-4ae378b9e181</groupId><id>d9b44845-0a0a-4ca0-8c99-6257a372f973</id><type>PROCESSOR</type></destination><flowFileExpiration>0 sec</flowFileExpiration><labelIndex>1</labelIndex><name></name><selectedRelationships>200</selectedRelationships><source><groupId>f171ca87-d018-4f94-a245-4ae378b9e181</groupId><id>51f639fd-42fc-4e43-96ac-f88e3586f55d</id><type>PROCESSOR</type></source><zIndex>0</zIndex></connections><connections><id>b4a967a9-5be7-4dcc-8de4-82ef908eebf2</id><parentGroupId>f171ca87-d018-4f94-a245-4ae378b9e181</parentGroupId><backPressureDataSizeThreshold>0 MB</backPressureDataSizeThreshold><backPressureObjectThreshold>0</backPressureObjectThreshold><destination><groupId>f171ca87-d018-4f94-a245-4ae378b9e181</groupId><id>51f639fd-42fc-4e43-96ac-f88e3586f55d</id><type>PROCESSOR</type></destination><flowFileExpiration>0 sec</flowFileExpiration><labelIndex>1</labelIndex><name></name><selectedRelationships>Original</selectedRelationships><source><groupId>f171ca87-d018-4f94-a245-4ae378b9e181</groupId><id>0ba0b02b-bc72-492d-8e1d-d473fdaca6c5</id><type>PROCESSOR</type></source><zIndex>0</zIndex></connections><processors><id>d9b44845-0a0a-4ca0-8c99-6257a372f973</id><parentGroupId>f171ca87-d018-4f94-a245-4ae378b9e181</parentGroupId><position><x>851.2960157866881</x><y>550.0135779982523</y></position><config><bulletinLevel>WARN</bulletinLevel><comments></comments><concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount><defaultConcurrentTasks><entry><key>TIMER_DRIVEN</key><value>1</value></entry><entry><key>EVENT_DRIVEN</key><value>0</value></entry><entry><key>CRON_DRIVEN</key><value>1</value></entry></defaultConcurrentTasks><defaultSchedulingPeriod><entry><key>TIMER_DRIVEN</key><value>0 sec</value></entry><entry><key>CRON_DRIVEN</key><value>* * * * * ?</value></entry></defaultSchedulingPeriod><descriptors><entry><key>Hash Attribute Name</key><value><defaultValue>hash.value</defaultValue><description>The name of the FlowFile Attribute into which the Hash Value should be written. If the value already exists, it will be overwritten</description><displayName>Hash Attribute Name</displayName><dynamic>false</dynamic><name>Hash Attribute Name</name><required>true</required><sensitive>false</sensitive><supportsEl>false</supportsEl></value></entry><entry><key>Hash Algorithm</key><value><allowableValues><displayName>RIPEMD320</displayName><value>RIPEMD320</value></allowableValues><allowableValues><displayName>SHA-1</displayName><value>SHA-1</value></allowableValues><allowableValues><displayName>SHA-384</displayName><value>SHA-384</value></allowableValues><allowableValues><displayName>RIPEMD160</displayName><value>RIPEMD160</value></allowableValues><allowableValues><displayName>SHA</displayName><value>SHA</value></allowableValues><allowableValues><displayName>WHIRLPOOL</displayName><value>WHIRLPOOL</value></allowableValues><allowableValues><displayName>GOST3411</displayName><value>GOST3411</value></allowableValues><allowableValues><displayName>SHA-224</displayName><value>SHA-224</value></allowableValues><allowableValues><displayName>SHA-256</displayName><value>SHA-256</value></allowableValues><allowableValues><displayName>MD2</displayName><value>MD2</value></allowableValues><allowableValues><displayName>RIPEMD128</displayName><value>RIPEMD128</value></allowableValues><allowableValues><displayName>MD4</displayName><value>MD4</value></allowableValues><allowableValues><displayName>SHA-512</displayName><value>SHA-512</value></allowableValues><allowableValues><displayName>RIPEMD256</displayName><value>RIPEMD256</value></allowableValues><allowableValues><displayName>TIGER</displayName><value>TIGER</value></allowableValues><allowableValues><displayName>MD5</displayName><value>MD5</value></allowableValues><defaultValue>MD5</defaultValue><description>Determines what hashing algorithm should be used to perform the hashing function</description><displayName>Hash Algorithm</displayName><dynamic>false</dynamic><name>Hash Algorithm</name><required>true</required><sensitive>false</sensitive><supportsEl>false</supportsEl></value></entry></descriptors><lossTolerant>false</lossTolerant><penaltyDuration>30 sec</penaltyDuration><properties><entry><key>Hash Attribute Name</key></entry><entry><key>Hash Algorithm</key></entry></properties><runDurationMillis>0</runDurationMillis><schedulingPeriod>0 sec</schedulingPeriod><schedulingStrategy>TIMER_DRIVEN</schedulingStrategy><yieldDuration>1 sec</yieldDuration></config><name>HashContent</name><relationships><autoTerminate>true</autoTerminate><description>Any FlowFile that cannot be processed successfully will be sent to this relationship without any attribute being added</description><name>failure</name></relationships><relationships><autoTerminate>true</autoTerminate><description>FlowFiles that are process successfully will be sent to this relationship</description><name>success</name></relationships><state>STOPPED</state><style/><supportsEventDriven>true</supportsEventDriven><supportsParallelProcessing>true</supportsParallelProcessing><type>org.apache.nifi.processors.standard.HashContent</type></processors><processors><id>51f639fd-42fc-4e43-96ac-f88e3586f55d</id><parentGroupId>f171ca87-d018-4f94-a245-4ae378b9e181</parentGroupId><position><x>836.400390625</x><y>367.4216613769531</y></position><config><bulletinLevel>WARN</bulletinLevel><comments></comments><concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount><defaultConcurrentTasks><entry><key>TIMER_DRIVEN</key><value>1</value></entry><entry><key>EVENT_DRIVEN</key><value>0</value></entry><entry><key>CRON_DRIVEN</key><value>1</value></entry></defaultConcurrentTasks><defaultSchedulingPeriod><entry><key>TIMER_DRIVEN</key><value>0 sec</value></entry><entry><key>CRON_DRIVEN</key><value>* * * * * ?</value></entry></defaultSchedulingPeriod><descriptors><entry><key>Routing Strategy</key><value><allowableValues><description>A copy of the FlowFile will be routed to each relationship whose corresponding expression evaluates to 'true'</description><displayName>Route to Property name</displayName><value>Route to Property name</value></allowableValues><allowableValues><description>Requires that all user-defined expressions evaluate to 'true' for the FlowFile to be considered a match</description><displayName>Route to 'matched' if all match</displayName><value>Route to 'match' if all match</value></allowableValues><allowableValues><description>Requires that at least one user-defined expression evaluate to 'true' for hte FlowFile to be considered a match</description><displayName>Route to 'matched' if any matches</displayName><value>Route to 'match' if any matches</value></allowableValues><defaultValue>Route to Property name</defaultValue><description>Specifies how to determine which relationship to use when evaluating the Expression Language</description><displayName>Routing Strategy</displayName><dynamic>false</dynamic><name>Routing Strategy</name><required>true</required><sensitive>false</sensitive><supportsEl>false</supportsEl></value></entry><entry><key>200</key><value><description></description><displayName>200</displayName><dynamic>true</dynamic><name>200</name><required>false</required><sensitive>false</sensitive><supportsEl>true</supportsEl></value></entry></descriptors><lossTolerant>false</lossTolerant><penaltyDuration>30 sec</penaltyDuration><properties><entry><key>Routing Strategy</key><value>Route to Property name</value></entry><entry><key>200</key><value>${invokehttp.status.code:equals(200)}</value></entry></properties><runDurationMillis>0</runDurationMillis><schedulingPeriod>0 sec</schedulingPeriod><schedulingStrategy>TIMER_DRIVEN</schedulingStrategy><yieldDuration>1 sec</yieldDuration></config><name>Route On Status Code</name><relationships><autoTerminate>false</autoTerminate><description></description><name>200</name></relationships><relationships><autoTerminate>true</autoTerminate><description>FlowFiles that do not match any user-define expression will be routed here</description><name>unmatched</name></relationships><state>STOPPED</state><style/><supportsEventDriven>true</supportsEventDriven><supportsParallelProcessing>true</supportsParallelProcessing><type>org.apache.nifi.processors.standard.RouteOnAttribute</type></processors><processors><id>0ba0b02b-bc72-492d-8e1d-d473fdaca6c5</id><parentGroupId>f171ca87-d018-4f94-a245-4ae378b9e181</parentGroupId><position><x>838.5449829101562</x><y>188.377197265625</y></position><config><bulletinLevel>WARN</bulletinLevel><comments></comments><concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount><defaultConcurrentTasks><entry><key>TIMER_DRIVEN</key><value>1</value></entry><entry><key>EVENT_DRIVEN</key><value>0</value></entry><entry><key>CRON_DRIVEN</key><value>1</value></entry></defaultConcurrentTasks><defaultSchedulingPeriod><entry><key>TIMER_DRIVEN</key><value>0 sec</value></entry><entry><key>CRON_DRIVEN</key><value>* * * * * ?</value></entry></defaultSchedulingPeriod><descriptors><entry><key>HTTP Method</key><value><defaultValue>GET</defaultValue><description>HTTP request method (GET, POST, PUT, DELETE, HEAD, OPTIONS).</description><displayName>HTTP Method</displayName><dynamic>false</dynamic><name>HTTP Method</name><required>true</required><sensitive>false</sensitive><supportsEl>true</supportsEl></value></entry><entry><key>Remote URL</key><value><description>Remote URL which will be connected to, including scheme, host, port, path.</description><displayName>Remote URL</displayName><dynamic>false</dynamic><name>Remote URL</name><required>true</required><sensitive>false</sensitive><supportsEl>true</supportsEl></value></entry><entry><key>SSL Context Service</key><value><description>The SSL Context Service used to provide client certificate information for TLS/SSL (https) connections.</description><displayName>SSL Context Service</displayName><dynamic>false</dynamic><identifiesControllerService>org.apache.nifi.ssl.SSLContextService</identifiesControllerService><name>SSL Context Service</name><required>false</required><sensitive>false</sensitive><supportsEl>false</supportsEl></value></entry><entry><key>Connection Timeout</key><value><defaultValue>5 secs</defaultValue><description>Max wait time for connection to remote service.</description><displayName>Connection Timeout</displayName><dynamic>false</dynamic><name>Connection Timeout</name><required>true</required><sensitive>false</sensitive><supportsEl>false</supportsEl></value></entry><entry><key>Read Timeout</key><value><defaultValue>15 secs</defaultValue><description>Max wait time for response from remote service.</description><displayName>Read Timeout</displayName><dynamic>false</dynamic><name>Read Timeout</name><required>true</required><sensitive>false</sensitive><supportsEl>false</supportsEl></value></entry><entry><key>Include Date Header</key><value><allowableValues><displayName>True</displayName><value>True</value></allowableValues><allowableValues><displayName>False</displayName><value>False</value></allowableValues><defaultValue>True</defaultValue><description>Include an RFC-2616 Date header in the request.</description><displayName>Include Date Header</displayName><dynamic>false</dynamic><name>Include Date Header</name><required>true</required><sensitive>false</sensitive><supportsEl>false</supportsEl></value></entry><entry><key>Follow Redirects</key><value><allowableValues><displayName>True</displayName><value>True</value></allowableValues><allowableValues><displayName>False</displayName><value>False</value></allowableValues><defaultValue>True</defaultValue><description>Follow HTTP redirects issued by remote server.</description><displayName>Follow Redirects</displayName><dynamic>false</dynamic><name>Follow Redirects</name><required>true</required><sensitive>false</sensitive><supportsEl>false</supportsEl></value></entry><entry><key>Attributes to Send</key><value><description>Regular expression that defines which attributes to send as HTTP headers in the request. If not defined, no attributes are sent as headers.</description><displayName>Attributes to Send</displayName><dynamic>false</dynamic><name>Attributes to Send</name><required>false</required><sensitive>false</sensitive><supportsEl>false</supportsEl></value></entry><entry><key>Basic Authentication Username</key><value><description>The username to be used by the client to authenticate against the Remote URL.  Cannot include control characters (0-31), ':', or DEL (127).</description><displayName>Basic Authentication Username</displayName><dynamic>false</dynamic><name>Basic Authentication Username</name><required>false</required><sensitive>false</sensitive><supportsEl>false</supportsEl></value></entry><entry><key>Basic Authentication Password</key><value><description>The password to be used by the client to authenticate against the Remote URL.</description><displayName>Basic Authentication Password</displayName><dynamic>false</dynamic><name>Basic Authentication Password</name><required>false</required><sensitive>false</sensitive><supportsEl>false</supportsEl></value></entry></descriptors><lossTolerant>false</lossTolerant><penaltyDuration>30 sec</penaltyDuration><properties><entry><key>HTTP Method</key></entry><entry><key>Remote URL</key><value>https://www.google.com</value></entry><entry><key>SSL Context Service</key></entry><entry><key>Connection Timeout</key></entry><entry><key>Read Timeout</key></entry><entry><key>Include Date Header</key></entry><entry><key>Follow Redirects</key></entry><entry><key>Attributes to Send</key></entry><entry><key>Basic Authentication Username</key></entry><entry><key>Basic Authentication Password</key></entry></properties><runDurationMillis>0</runDurationMillis><schedulingPeriod>0 sec</schedulingPeriod><schedulingStrategy>TIMER_DRIVEN</schedulingStrategy><yieldDuration>1 sec</yieldDuration></config><name>Search Google</name><relationships><autoTerminate>false</autoTerminate><description>FlowFile will be routed on any type of connection failure, timeout or general exception.</description><name>Failure</name></relationships><relationships><autoTerminate>true</autoTerminate><description>FlowFile will be routed on any status code that should NOT be retried (1xx, 3xx, 4xx status codes).</description><name>No Retry</name></relationships><relationships><autoTerminate>false</autoTerminate><description>Original FlowFile will be routed upon success (2xx status codes).</description><name>Original</name></relationships><relationships><autoTerminate>true</autoTerminate><description>Response FlowFile will be routed upon success (2xx status codes).</description><name>Response</name></relationships><relationships><autoTerminate>false</autoTerminate><description>FlowFile will be routed on any status code that can be retried (5xx status codes).</description><name>Retry</name></relationships><state>STOPPED</state><style/><supportsEventDriven>false</supportsEventDriven><supportsParallelProcessing>true</supportsParallelProcessing><type>org.apache.nifi.processors.standard.InvokeHTTP</type></processors><processors><id>0c7ce557-9e17-40d7-be3d-59e40bda3052</id><parentGroupId>f171ca87-d018-4f94-a245-4ae378b9e181</parentGroupId><position><x>291.68109130859375</x><y>-7.794247627258301</y></position><config><bulletinLevel>WARN</bulletinLevel><comments></comments><concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount><defaultConcurrentTasks><entry><key>TIMER_DRIVEN</key><value>1</value></entry><entry><key>EVENT_DRIVEN</key><value>0</value></entry><entry><key>CRON_DRIVEN</key><value>1</value></entry></defaultConcurrentTasks><defaultSchedulingPeriod><entry><key>TIMER_DRIVEN</key><value>0 sec</value></entry><entry><key>CRON_DRIVEN</key><value>* * * * * ?</value></entry></defaultSchedulingPeriod><descriptors><entry><key>File Size</key><value><description>The size of the file that will be used</description><displayName>File Size</displayName><dynamic>false</dynamic><name>File Size</name><required>true</required><sensitive>false</sensitive><supportsEl>false</supportsEl></value></entry><entry><key>Batch Size</key><value><defaultValue>1</defaultValue><description>The number of FlowFiles to be transferred in each invocation</description><displayName>Batch Size</displayName><dynamic>false</dynamic><name>Batch Size</name><required>true</required><sensitive>false</sensitive><supportsEl>false</supportsEl></value></entry><entry><key>Data Format</key><value><allowableValues><displayName>Binary</displayName><value>Binary</value></allowableValues><allowableValues><displayName>Text</displayName><value>Text</value></allowableValues><defaultValue>Binary</defaultValue><description>Specifies whether the data should be Text or Binary</description><displayName>Data Format</displayName><dynamic>false</dynamic><name>Data Format</name><required>true</required><sensitive>false</sensitive><supportsEl>false</supportsEl></value></entry><entry><key>Unique FlowFiles</key><value><allowableValues><displayName>true</displayName><value>true</value></allowableValues><allowableValues><displayName>false</displayName><value>false</value></allowableValues><defaultValue>false</defaultValue><description>If true, each FlowFile that is generated will be unique. If false, a random value will be generated and all FlowFiles will get the same content but this offers much higher throughput</description><displayName>Unique FlowFiles</displayName><dynamic>false</dynamic><name>Unique FlowFiles</name><required>true</required><sensitive>false</sensitive><supportsEl>false</supportsEl></value></entry></descriptors><lossTolerant>false</lossTolerant><penaltyDuration>30 sec</penaltyDuration><properties><entry><key>File Size</key><value>10 b</value></entry><entry><key>Batch Size</key></entry><entry><key>Data Format</key></entry><entry><key>Unique FlowFiles</key></entry></properties><runDurationMillis>0</runDurationMillis><schedulingPeriod>30 sec</schedulingPeriod><schedulingStrategy>TIMER_DRIVEN</schedulingStrategy><yieldDuration>1 sec</yieldDuration></config><name>Source</name><relationships><autoTerminate>false</autoTerminate><description></description><name>success</name></relationships><state>STOPPED</state><style/><supportsEventDriven>false</supportsEventDriven><supportsParallelProcessing>true</supportsParallelProcessing><type>org.apache.nifi.processors.standard.GenerateFlowFile</type></processors><processors><id>978f5abe-b43b-47e2-9f0b-37c665fb6fd8</id><parentGroupId>f171ca87-d018-4f94-a245-4ae378b9e181</parentGroupId><position><x>836.550537109375</x><y>-2.695110321044922</y></position><config><bulletinLevel>WARN</bulletinLevel><comments></comments><concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount><defaultConcurrentTasks><entry><key>TIMER_DRIVEN</key><value>1</value></entry><entry><key>EVENT_DRIVEN</key><value>0</value></entry><entry><key>CRON_DRIVEN</key><value>1</value></entry></defaultConcurrentTasks><defaultSchedulingPeriod><entry><key>TIMER_DRIVEN</key><value>0 sec</value></entry><entry><key>CRON_DRIVEN</key><value>* * * * * ?</value></entry></defaultSchedulingPeriod><descriptors><entry><key>q</key><value><description></description><displayName>q</displayName><dynamic>true</dynamic><name>q</name><required>false</required><sensitive>false</sensitive><supportsEl>true</supportsEl></value></entry></descriptors><lossTolerant>false</lossTolerant><penaltyDuration>30 sec</penaltyDuration><properties><entry><key>q</key><value>nifi</value></entry></properties><runDurationMillis>0</runDurationMillis><schedulingPeriod>0 sec</schedulingPeriod><schedulingStrategy>TIMER_DRIVEN</schedulingStrategy><yieldDuration>1 sec</yieldDuration></config><name>q=nifi</name><relationships><autoTerminate>false</autoTerminate><description>All FlowFiles are routed to this relationship</description><name>success</name></relationships><state>STOPPED</state><style/><supportsEventDriven>true</supportsEventDriven><supportsParallelProcessing>true</supportsParallelProcessing><type>org.apache.nifi.processors.attributes.UpdateAttribute</type></processors></snippet><timestamp>08/03/2015 15:56:12 EDT</timestamp></template>